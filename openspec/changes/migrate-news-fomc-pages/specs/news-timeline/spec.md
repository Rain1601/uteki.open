# News Timeline Spec

财经新闻时间线页面规格说明

## ADDED Requirements

### Requirement: 日历面板显示月度视图

系统 SHALL 在左侧显示日历面板，包含当前月份的日历视图，用户可以通过日历快速导航到特定日期的新闻。

#### Scenario: 显示当前月份日历
- **WHEN** 用户访问 /news-timeline 页面
- **THEN** 系统显示当前年月的日历视图，包含星期标题行和日期网格

#### Scenario: 高亮有新闻的日期
- **WHEN** 某日期有新闻数据
- **THEN** 该日期单元格显示蓝色圆点指示器，并显示新闻数量

#### Scenario: 切换月份
- **WHEN** 用户点击左/右箭头按钮
- **THEN** 日历切换到上/下个月，并自动加载该月份的新闻数据

### Requirement: 新闻标题列表

系统 SHALL 在日历下方显示当前加载的所有新闻标题列表，支持快速定位到具体新闻。

#### Scenario: 显示新闻标题列表
- **WHEN** 新闻数据加载完成
- **THEN** 在日历下方显示按时间降序排列的新闻标题，包含日期、时间、来源和标题文本

#### Scenario: 点击标题定位新闻
- **WHEN** 用户点击标题列表中的某条新闻
- **THEN** 右侧新闻面板滚动到对应的新闻卡片，并高亮显示

### Requirement: 新闻列表面板

系统 SHALL 在右侧显示新闻列表面板，按日期分组展示新闻详情。

#### Scenario: 按日期分组显示新闻
- **WHEN** 新闻数据加载完成
- **THEN** 右侧面板按日期分组显示新闻，每个分组有日期标签分隔线

#### Scenario: 显示新闻卡片详情
- **WHEN** 新闻卡片渲染
- **THEN** 显示新闻来源图标、来源名称、发布时间、标题、摘要和标签

#### Scenario: 无限滚动加载
- **WHEN** 用户滚动到新闻列表顶部或底部附近
- **THEN** 系统自动加载相邻月份的新闻数据（顶部加载更新月份，底部加载更旧月份）

### Requirement: 新闻筛选功能

系统 SHALL 支持按类别筛选新闻（全部、重要、加密货币、股票、外汇）。

#### Scenario: 筛选重要新闻
- **WHEN** 用户选择"重要"筛选条件
- **THEN** 新闻列表仅显示标记为 important 的新闻

#### Scenario: 筛选特定类别
- **WHEN** 用户选择"加密货币"/"股票"/"外汇"筛选条件
- **THEN** 新闻列表仅显示包含对应标签的新闻

### Requirement: AI 新闻解读

系统 SHALL 支持对单条新闻进行 AI 分析，以流式方式展示分析结果。

#### Scenario: 触发 AI 分析
- **WHEN** 用户点击新闻卡片上的"AI解读"按钮
- **THEN** 系统展开分析卡片，显示加载状态，并开始流式请求

#### Scenario: 显示流式分析结果
- **WHEN** 后端返回流式分析数据
- **THEN** 分析卡片实时显示文本内容，带有光标闪烁效果

#### Scenario: 显示分析完成结果
- **WHEN** 流式分析完成
- **THEN** 显示影响评估标签（正向/负向/无影响）和完整分析文本

#### Scenario: 收起/展开已有分析
- **WHEN** 用户点击已有分析结果的"AI解读"按钮
- **THEN** 切换分析卡片的展开/收起状态，不重新请求

### Requirement: 文章详情对话框

系统 SHALL 支持查看新闻文章的完整内容，支持中英文切换。

#### Scenario: 打开文章详情
- **WHEN** 用户点击新闻卡片
- **THEN** 打开文章详情对话框，显示完整文章内容

#### Scenario: 切换语言
- **WHEN** 用户点击"英文"/"中文"按钮
- **THEN** 以指定语言打开文章详情对话框

### Requirement: 主题适配

系统 SHALL 支持深色和浅色主题，所有颜色使用主题变量。

#### Scenario: 深色主题显示
- **WHEN** 系统处于深色主题
- **THEN** 页面使用深色背景、浅色文字、蓝色强调色

#### Scenario: 浅色主题显示
- **WHEN** 系统处于浅色主题
- **THEN** 页面使用浅色背景、深色文字，保持可读性和视觉一致性
